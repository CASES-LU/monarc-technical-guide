=== Global architecture

Basically MONARC is composed of two main parts:

* a back office: for the management of the database, servers and clients of
  MONARC installations;
* a front office: for the management of the risks analysis. A front office
  instance can be used without the back office.

[NOTE]
====
If you want run your own risk analysis you only need the front office.
More information about the installation in
<<_includes/deployment.adoc#only-the-front-office,this section>>.
====

The whole architecture includes an additional reverse proxy and a configuration
server. It is possible to connect many front offices to one back office.

image:monarc-architecture.png[MONARC Architecture, align="center", scaledwidth="75%"]

It can be deployed with
link:https://www.ansible.com[ansible]. More information
link:https://github.com/monarc-project/ansible-ubuntu[here].


* 172.18.14.73 - monarc2-rpx.test.your.domain.com
* 172.18.13.71 - monarc2-conf.test.your.domain.com
* 172.18.13.72 - monarc2-master.test.your.domain.com
* 172.18.13.73 - monarc2-fo01.test.your.domain.com
* 172.18.13.74 - monarc2-fo02.test.your.domain.com



==== Network requirements

The configuration server (CFG) manages the configurations of the back office,
reverse proxy and different front office(s) via SSH.

The reverse proxy (RPX) should of course be available from Internet.

The database _common_ of the BO should also be available to the FO servers.

link:http://www.postfix.org[Postfix] should be installed on the BO and on the
FO. Indeed, SMTP is used for the account creation and the password recovery.
The easiest configuration is to set up Postfix for relaying emails through your
mail server.


=== Specifications by server

The specifications below are of course only advices. It will vary depending on
your need.

Back office:

* 4 vCPU
* 16GB RAM
* 25GB HDD
* Ubuntu Server 16.04.2 LTS 64 bits

Front office:

* 4vCPU
* 16GB RAM
* 25GB HDD
* Ubuntu Server 16.04.2 LTS 64 bits

Reverse proxy:

* Not that powerful, but all connections (for the BO or FO) will go through it.
  The bandwidth must be good.
* Ubuntu Server 16.04.2 LTS 64 bits

Configuration server:

* Not that powerful. Mainly used for the creation of clients on the different
  FOs.
* Ubuntu Server 16.04.2 LTS 64 bits
* We have tested with version 2.2.1.0 of ansible.
